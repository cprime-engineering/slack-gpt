#--------------------------------------------------------------------------------------------------------------
#--------------------------------------------------------------------------------------------------------------
# Name: bazel
# Description: bazel
#--------------------------------------------------------------------------------------------------------------
#--------------------------------------------------------------------------------------------------------------

#--------------------------------------------------------------------------------------------------------------
#
# Begin bazel make targets
#
#--------------------------------------------------------------------------------------------------------------

#--------------------------------------------------------------------------------------------------------------
# bazel clean
#--------------------------------------------------------------------------------------------------------------
bazel/clean:
	./bazelisk clean --expunge
	if [ -d "build-bin" ]; then rm -Rf build-bin; fi

#--------------------------------------------------------------------------------------------------------------
# bazel build
#--------------------------------------------------------------------------------------------------------------
bazel/build:
	./bazelisk --bazelrc=.bazel/bazelrc/gh.codespace.bazelrc build @//python/...

#--------------------------------------------------------------------------------------------------------------
# bazel test
#--------------------------------------------------------------------------------------------------------------
bazel/test: bazel/build
	./bazelisk --bazelrc=.bazel/bazelrc/gh.codespace.bazelrc test @//python/...

#--------------------------------------------------------------------------------------------------------------
# bazel version
#--------------------------------------------------------------------------------------------------------------
bazel/version:
	./bazelisk version
	./bazelisk --version

#--------------------------------------------------------------------------------------------------------------
# bazel lint
#--------------------------------------------------------------------------------------------------------------
bazel/lint:
	buildifier -r --lint=fix .

#--------------------------------------------------------------------------------------------------------------
# bazel run console
#--------------------------------------------------------------------------------------------------------------
bazel/run/console:
	./bazelisk --bazelrc=.bazel/bazelrc/gh.codespace.bazelrc run @//python/console:console

#--------------------------------------------------------------------------------------------------------------
# bazel run cprime_clients
#--------------------------------------------------------------------------------------------------------------
bazel/run/cprime_clients:
	./bazelisk --bazelrc=.bazel/bazelrc/gh.codespace.bazelrc run @//python/quick_hacks:cprime_clients

#--------------------------------------------------------------------------------------------------------------
# bazel run cprime_openai
#--------------------------------------------------------------------------------------------------------------
bazel/run/cprime_openai:
	./bazelisk --bazelrc=.bazel/bazelrc/gh.codespace.bazelrc run @//python/quick_hacks:cprime_openai

#--------------------------------------------------------------------------------------------------------------
# bazel run llm_chain
#--------------------------------------------------------------------------------------------------------------
bazel/run/llm_chain:
	./bazelisk --bazelrc=.bazel/bazelrc/gh.codespace.bazelrc run @//python/quick_hacks:llm_chain

#--------------------------------------------------------------------------------------------------------------
# bazel run tdd_langchain
#--------------------------------------------------------------------------------------------------------------
bazel/run/tdd_langchain:
	./bazelisk --bazelrc=.bazel/bazelrc/gh.codespace.bazelrc run @//python/quick_hacks:tdd_langchain

#--------------------------------------------------------------------------------------------------------------
#
# End bazel make targets
#
#--------------------------------------------------------------------------------------------------------------
