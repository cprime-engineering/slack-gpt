#--------------------------------------------------------------------------------------------------------------
#--------------------------------------------------------------------------------------------------------------
# Name: bazel
# Description: bazel
#--------------------------------------------------------------------------------------------------------------
#--------------------------------------------------------------------------------------------------------------

#--------------------------------------------------------------------------------------------------------------
#
# Begin bazel make targets
#
#--------------------------------------------------------------------------------------------------------------

#--------------------------------------------------------------------------------------------------------------
# bazel clean
#--------------------------------------------------------------------------------------------------------------
bazel/clean:
	./bazelisk clean --expunge
	if [ -d "build-bin" ]; then rm -Rf build-bin; fi

#--------------------------------------------------------------------------------------------------------------
# bazel build
#--------------------------------------------------------------------------------------------------------------
bazel/build:
	./bazelisk --bazelrc=.bazel/bazelrc/gh.codespace.bazelrc build @//...

#--------------------------------------------------------------------------------------------------------------
# bazel test
#--------------------------------------------------------------------------------------------------------------
bazel/test: bazel/build
	./bazelisk --bazelrc=.bazel/bazelrc/gh.codespace.bazelrc test @//tests/...

#--------------------------------------------------------------------------------------------------------------
# bazel version
#--------------------------------------------------------------------------------------------------------------
bazel/version:
	./bazelisk version
	./bazelisk --version

#--------------------------------------------------------------------------------------------------------------
# bazel lint
#--------------------------------------------------------------------------------------------------------------
bazel/lint:
	buildifier -r --lint=fix .

#--------------------------------------------------------------------------------------------------------------
# bazel run Ada
#--------------------------------------------------------------------------------------------------------------
bazel/run/ada:
	./bazelisk --bazelrc=.bazel/bazelrc/gh.codespace.bazelrc run @//personas/ada:slackbot

#--------------------------------------------------------------------------------------------------------------
# bazel run Sebastian
#--------------------------------------------------------------------------------------------------------------
bazel/run/sebastian:
	./bazelisk --bazelrc=.bazel/bazelrc/gh.codespace.bazelrc run @//personas/sebastian:slackbot

#--------------------------------------------------------------------------------------------------------------
# bazel run Safe
#--------------------------------------------------------------------------------------------------------------
bazel/run/safe:
	./bazelisk --bazelrc=.bazel/bazelrc/gh.codespace.bazelrc run @//personas/safe:slackbot

#--------------------------------------------------------------------------------------------------------------
# bazel run pinecone cprime_case_studies_upsert
#--------------------------------------------------------------------------------------------------------------
bazel/run/pinecone/cprime_case_studies_upsert:
	./bazelisk --bazelrc=.bazel/bazelrc/gh.codespace.bazelrc run @//utilities/pinecone_integration:cprime_case_studies_upsert

#--------------------------------------------------------------------------------------------------------------
# bazel run pinecone safe_reference_upsert
#--------------------------------------------------------------------------------------------------------------
bazel/run/pinecone/safe_reference_upsert:
	./bazelisk --bazelrc=.bazel/bazelrc/gh.codespace.bazelrc run @//utilities/pinecone_integration:safe_reference_upsert

#--------------------------------------------------------------------------------------------------------------
#
# End bazel make targets
#
#--------------------------------------------------------------------------------------------------------------
